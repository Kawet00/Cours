<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini-cours SQL</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav style="margin:10px 20px; display:flex; gap:10px; flex-wrap:wrap;">
        <a href="../index.html"
           style="display:inline-block;padding:8px 14px;border-radius:999px;
                  background:#333;color:#fff;text-decoration:none;font-weight:bold;">
            ⬅ Retour à l'accueil
        </a>
        <a href="cours-sql.rar" download
           style="display:inline-block;padding:8px 14px;border-radius:999px;
                  background:#0b7285;color:#fff;text-decoration:none;font-weight:bold;">
            ⬇ Télécharger cette page (RAR)
        </a>
    </nav>

    <div class="page-container">
        <div id="introduction">
            <h1>Mini-cours sur le SQL</h1>
            <p>
                SQL (Structured Query Language) est un langage qui permet de <strong>créer</strong>,
                <strong>lire</strong>, <strong>modifier</strong> et <strong>supprimer</strong> des données
                dans une base de données relationnelle (MySQL, PostgreSQL, SQL Server, etc.).
            </p>
            <p>
                Dans ce mini-cours, on va partir de <strong>0</strong> : qu’est-ce qu’une base de données,
                quels sont les sous-langages de SQL (LDD, LMD, etc.) puis les principales commandes.
            </p>
        </div>
        
        <!-- 1. Création base + tables -->
        <h2>1. Créer une base de données et des tables</h2>
        <p>
            Pour créer une base de données en local avec WAMP :
        </p>
        <ol>
            <li>Lance WAMP et ouvre <strong>phpMyAdmin</strong> (généralement via <code>http://localhost/phpmyadmin</code>).</li>
            <li>Connecte-toi avec l’utilisateur <code>root</code> (par défaut, pas de mot de passe).</li>
            <li>Clique sur <strong>Nouvelle base de données</strong> dans le menu de gauche.</li>
            <li>Donne un nom à ta base (ex : <code>magasin</code>), choisis le <strong>interclassement</strong> (utf8_general_ci conseillé), puis clique sur <strong>Créer</strong>.</li>
        </ol>
        <img src="screens/creation_base.png" alt="Création d'une base dans phpMyAdmin" class="screen" onclick="showModalImg(this.src)">
        <img src="screens/creation_table.png" alt="Création d'une table dans phpMyAdmin" class="screen" onclick="showModalImg(this.src)">
        <pre><code>CREATE TABLE utilisateurs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nom VARCHAR(100) NOT NULL,
    email VARCHAR(150) NOT NULL,
    date_creation DATE
);</code></pre>

        <!-- 2. Remplir les tables avec fichier au format CSV -->
        <h2>2. Remplir les tables avec un fichier CSV</h2>
        <p>
            Pour importer des données dans une table depuis un fichier CSV avec phpMyAdmin :
        </p>
        <ol>
            <li>Prépare un fichier CSV avec les colonnes séparées par des virgules.</li>
            <li>Dans phpMyAdmin, sélectionne la table puis va dans l’onglet <strong>Importer</strong>.</li>
            <li>Choisis ton fichier CSV, configure le séparateur (souvent <code>,</code>), puis lance l’import.</li>
        </ol>
        <img src="screens/import_csv.png" alt="Import CSV dans phpMyAdmin" class="screen" onclick="showModalImg(this.src)">

        <!-- 3. Les formes normales -->
        <h2>3. Les formes normales</h2>
        <!--<img src="screens/formes_normales.jpg" alt="Schéma de normalisation" class="screen" onclick="showModalImg(this.src)">
    --><p>
            Les <strong>formes normales</strong> sont des règles pour organiser les données et éviter les redondances :
        </p>
        <ul>
            <li><strong>1ère forme normale (1NF)</strong> : chaque colonne contient une seule valeur, chaque ligne est unique.</li>
            <li><strong>2ème forme normale (2NF)</strong> : toutes les colonnes dépendent entièrement de la clé primaire.</li>
            <li><strong>3ème forme normale (3NF)</strong> : aucune colonne ne dépend d’une autre colonne non clé.</li>
        </ul>
        <!-- Je peux ajouter ici un schéma d'exemple de normalisation -->

        <!-- 4. Modèle relationnel en détail -->
        <h2>4. Le modèle relationnel en détail</h2>
        <p>
            Le <strong>modèle relationnel</strong> organise les données en <strong>tables</strong> reliées entre elles par des <strong>relations</strong> (clés étrangères). Chaque table représente une entité (ex : <code>utilisateurs</code>, <code>commandes</code>), chaque ligne une instance, chaque colonne un attribut.
        </p>
        <ul>
            <li><strong>Clé primaire</strong> : identifiant unique de chaque ligne (<code>id</code>).</li>
            <li><strong>Clé étrangère</strong> : référence à la clé primaire d’une autre table (<code>utilisateur_id</code> dans <code>commandes</code>).</li>
            <li><strong>Relation</strong> : lien logique entre deux tables (ex : un utilisateur peut avoir plusieurs commandes).</li>
        </ul>
        <img src="screens/modele_relationnel.png" alt="Schéma du modèle relationnel" class="screen" onclick="showModalImg(this.src)">

        <!-- 5. Langage d'interrogation de données -->
        <h2>5. Langage d’interrogation de données (LID)</h2>
        <p>
            Le <strong>langage d’interrogation de données</strong> (LID) permet de lire et rechercher des données dans les tables. Il s’appuie principalement sur la commande <code>SELECT</code> et ses variantes (<code>WHERE</code>, <code>ORDER BY</code>, <code>GROUP BY</code>, etc.).
        </p>
        <img src="screens/select_phpmyadmin.png" alt="Requête SELECT dans phpMyAdmin" class="screen" onclick="showModalImg(this.src)">
        <pre><code>SELECT nom, email FROM utilisateurs WHERE actif = TRUE;</code></pre>
        <pre><code>SELECT COUNT(*) FROM commandes WHERE montant &gt; 100;</code></pre>

        <!-- 6. Auto-incrémentation et saisie manuelle -->
        <h2>6. Auto-incrémentation et saisie manuelle</h2>
        <p>
            <code>AUTO_INCREMENT</code> permet d’ajouter automatiquement une valeur unique à chaque nouvelle ligne.<br>
            Pour activer l'auto-incrémentation via l'interface graphique de phpMyAdmin :
        </p>
        <ol>
            <li>Dans phpMyAdmin, sélectionnez la base de données, puis la table concernée.</li>
            <li>Allez dans l'onglet <strong>Structure</strong>.</li>
            <li>Cliquez sur l'icône <strong>Modifier</strong> (en forme de crayon) à côté de la colonne.</li>
            <li>Cochez la case <strong>A_I</strong> (Auto Increment).</li>
            <li>Enregistrez les modifications.</li>
        </ol>
        <img src="screens/auto_increment_1.png" alt="Activer l'auto-incrémentation dans phpMyAdmin" class="screen" onclick="showModalImg(this.src)">
        <img src="screens/auto_increment_2.png" alt="Activer l'auto-incrémentation dans phpMyAdmin" class="screen" onclick="showModalImg(this.src)">
        <pre><code>INSERT INTO utilisateurs (id, nom) VALUES (10, 'Manuel');</code></pre>
        <pre><code>CREATE TABLE utilisateurs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nom VARCHAR(100) NOT NULL
);</code></pre>

        <!-- 7. Tri et fonctions monotable -->
        <h2>7. Trier les résultats et fonctions monotable</h2>
        <p>
            Pour trier les résultats d’une requête, on utilise <code>ORDER BY</code> :
        </p>
        <pre><code>SELECT nom, email FROM utilisateurs
ORDER BY nom ASC;  -- Tri alphabétique croissant

SELECT * FROM commandes
ORDER BY montant DESC;  -- Tri du plus grand au plus petit</code></pre>
        <p>
            Les fonctions d’agrégation permettent de calculer des statistiques sur une colonne :
        </p>
        <ul>
            <li><code>COUNT()</code> : nombre de lignes</li>
            <li><code>SUM()</code> : somme</li>
            <li><code>AVG()</code> : moyenne</li>
            <li><code>MIN()</code> / <code>MAX()</code> : minimum / maximum</li>
        </ul>
        <pre><code>SELECT COUNT(*) FROM utilisateurs;
SELECT AVG(montant) FROM commandes;
SELECT MAX(date_commande) FROM commandes;</code></pre>

        <!-- 8. Restrictions de données -->
        <h2>8. Restrictions de données (contraintes SQL)</h2>
        <p>
            Les <strong>contraintes</strong> permettent de garantir la validité et la cohérence des données dans une table :
        </p>
        <ul>
            <li><code>NOT NULL</code> : la colonne ne peut pas être vide.</li>
            <li><code>UNIQUE</code> : chaque valeur doit être différente dans cette colonne.</li>
            <li><code>PRIMARY KEY</code> : identifiant unique de la ligne (oblige <code>NOT NULL</code> et <code>UNIQUE</code>).</li>
            <li><code>FOREIGN KEY</code> : référence une clé primaire d’une autre table (pour lier les tables).</li>
            <li><code>CHECK</code> : impose une condition sur les valeurs (ex : valeur positive).</li>
            <li><code>DEFAULT</code> : valeur par défaut si rien n’est précisé.</li>
        </ul>
        <pre><code>CREATE TABLE utilisateurs (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nom VARCHAR(100) NOT NULL,
    email VARCHAR(150) UNIQUE,
    age INT CHECK (age &gt;= 0),
    actif BOOLEAN DEFAULT TRUE
);</code></pre>
        <pre><code>CREATE TABLE commandes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    utilisateur_id INT,
    montant DECIMAL(10,2) NOT NULL CHECK (montant &gt; 0),
    date_commande DATE,
    FOREIGN KEY (utilisateur_id) REFERENCES utilisateurs(id)
);</code></pre>

        <!-- 9. Jointure simple -->
        <h2>9. Jointure simple</h2>
        <!-- Ajoute ici un screen montrant une jointure simple dans phpMyAdmin -->
        <p>
            La jointure simple (<code>INNER JOIN</code>) permet de lier deux tables selon une clé étrangère :
        </p>
        <pre><code>SELECT u.nom, c.montant
FROM utilisateurs u
INNER JOIN commandes c ON c.utilisateur_id = u.id;</code></pre>

        <!-- 10. Gestion des dates -->
        <h2>10. Gestion des dates</h2>
        <!-- Ajoute ici un screen montrant une requête sur les dates dans phpMyAdmin -->
        <p>
            Pour manipuler les dates en SQL :
        </p>
        <pre><code>SELECT * FROM commandes WHERE date_commande &gt; '2024-01-01';
SELECT * FROM commandes WHERE YEAR(date_commande) = 2024;
SELECT * FROM commandes WHERE MONTH(date_commande) = 6;</code></pre>
        <!-- Tu peux ajouter ici un screen montrant des requêtes sur les dates -->

        <!-- 11. Jointures multitables -->
        <h2>11. Jointures multitables</h2>
        <!-- Ajoute ici un schéma ou screen montrant une jointure multitables dans phpMyAdmin -->
        <p>
            Les jointures multitables permettent de combiner plusieurs tables en une seule requête :
        </p>
        <pre><code>SELECT u.nom, c.montant, p.nom AS produit
FROM utilisateurs u
INNER JOIN commandes c ON c.utilisateur_id = u.id
INNER JOIN produits p ON c.produit_id = p.id;</code></pre>

        <h2>8. Résumé</h2>
        <ul>
            <li><code>CREATE TABLE</code> : créer une table.</li>
            <li><code>INSERT INTO</code> : ajouter des lignes.</li>
            <li><code>SELECT</code> (+ <code>WHERE</code>) : lire et filtrer des données.</li>
            <li><code>UPDATE</code> : modifier des données.</li>
            <li><code>DELETE</code> : supprimer des données.</li>
            <li><code>JOIN</code> : combiner plusieurs tables.</li>
        </ul>
        <p>
            Comme pour HTML et CSS, le mieux pour apprendre SQL est de tester ces commandes dans un
            vrai système (par exemple MySQL ou PostgreSQL) et d’observer le résultat.
        </p>
    </div>

    <!-- Modale image agrandie -->
    <div class="modal-img-bg" id="modalImgBg" onclick="closeModalImg(event)">
        <button class="close-btn" onclick="closeModalImg(event)">&times;</button>
        <img id="modalImg" src="" alt="Image agrandie">
    </div>

    <script>
        function showModalImg(src) {
            document.getElementById('modalImg').src = src;
            document.getElementById('modalImgBg').classList.add('active');
        }
        function closeModalImg(e) {
            // Ferme si clic sur fond ou bouton, pas sur l'image
            if (e.target.classList.contains('modal-img-bg') || e.target.classList.contains('close-btn')) {
                document.getElementById('modalImgBg').classList.remove('active');
                document.getElementById('modalImg').src = '';
            }
        }
    </script>
</body>
</html>